package io.github.lefraudeur.modules.exploit;

import io.github.lefraudeur.events.PreTickEvent;
import io.github.lefraudeur.modules.Category;
import io.github.lefraudeur.modules.Info;
import io.github.lefraudeur.modules.Module;
import net.minecraft.client.MinecraftClient;

@Info(category = Category.EXPLOIT, name = "BroIthinkULAGGING",  description = "God mother fucking DAMMMMMN", key = Module.key_none)
public class Timer extends Module
{
    private enum Action {
        CANCEL,
        DOUBLE,
        NORMAL,
        DELAY
    }
    private final Action[] actions = {
            Action.CANCEL, Action.CANCEL, Action.DOUBLE, Action.DOUBLE, Action.DOUBLE,
            Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL,
            Action.CANCEL, Action.CANCEL, Action.DOUBLE, Action.DOUBLE,
            Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL,
            Action.CANCEL, Action.DOUBLE, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL,
            Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL,
            Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL, Action.NORMAL,
            Action.CANCEL, Action.CANCEL, Action.CANCEL, Action.CANCEL, Action.DOUBLE, Action.DOUBLE, Action.DOUBLE, Action.DOUBLE, Action.NORMAL, Action.NORMAL, Action.NORMAL
    };
    private int action_index = 0;
    private boolean nopreevent = false;

    @Override
    public void onPreTickEvent(PreTickEvent event)
    {
        if (nopreevent) return;
        nopreevent = true;

        switch (actions[action_index])
        {
            case CANCEL -> event.setCancelled(true);
            case DELAY ->
            {
                try {
                    Thread.sleep(20);
                } catch (InterruptedException e) {
                    throw new RuntimeException(e);
                }
            }
            case DOUBLE -> MinecraftClient.getInstance().tick();
        }
        action_index++;
        if (action_index == actions.length) action_index = 0;

        nopreevent = false;
    }
}
